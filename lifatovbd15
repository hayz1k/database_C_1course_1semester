#define _CRT_SECURE_NO_DEPRECATE
#define _CRT_SECURE_NO_WARNINGS

#define N 10
#define euler 2.718281828459045235360287471352
#define M_PI = 3.14159265359

#include <stdio.h>
#include <math.h>
#include <locale.h>
#include <time.h>
#include <string.h>
#include <conio.h>
#include <stdlib.h>
#include <ctype.h>



struct person {
	char personal_account[20];
	char surname[20];
	int current_counter;
	int for_payment;
	int payment;
};

typedef struct person data;

int payment_search(data* ptr_struct, int payment, int size) {
	for (int i = 0; i <= size; i++) {
		if (ptr_struct[i].payment == payment) {
			return i;
		}
	}
	return 0;
}


int surname_search(data* ptr_struct, char surname, int size) {
	for (int i = 0; i <= size; i++) {
		if (ptr_struct[i].surname == surname) {
			return i;
		}
	}
	return 999;
}


void tabulation(data* ptr_struct, int c, int k) {
	for (int i = c; i <= k; i++) {
		printf("Лицевой счет: %s\n", &ptr_struct[i].personal_account);
		printf("Фамилия: %s\n", &ptr_struct[i].surname);
		printf("Текущее показание счетчика: %d\n", ptr_struct[i].current_counter);
		printf("Начислено к оплатей: %d\n", ptr_struct[i].for_payment);
		printf("Сумма оплаты: %d\n", ptr_struct[i].payment);
	}


}

void add_data(data* ptr_struct, int size) {
	for (int i = 0; i < size; i++) {

		printf("Введите номер лицевого счета : ");
		scanf("%s", &ptr_struct[i].personal_account);

		printf("Введите фамилию : ");
		scanf("%s", &ptr_struct[i].surname);

		printf("Введите показания счетчика : ");
		scanf("%d", &ptr_struct[i].current_counter);

		printf("Начислено к оплате : ");
		scanf("%d", &ptr_struct[i].for_payment);

		printf("Сумма оплаты : ");
		scanf("%d", &ptr_struct[i].payment);
	}
}


void main() {
	setlocale(LC_ALL, "RUS");
	int search_payment, x, y, size, end = 0;
	char search_surname[20];
	puts("Введите количество пользователей");
	scanf("%d", &size);
	size = size <= 10 ? size : 10;
	data p;
	data* ptr_struct = NULL;
	ptr_struct = &p;


	while (end != 6) {
		puts("Выберите команду:\n1. Ввести данные о потребителях\n2. Найти потребителя по сумме оплаты\n3. Найти потребителя по фамилии\n4. Отсортировать по сумме оплаты\n5. Выйти из программы");
		scanf("%d", &end);
		switch (end) {
		case 1:
			add_data(ptr_struct, size);
			break;

		case 2:
			printf("Введите сумму оплаты : ");
			scanf("%d", &search_payment);

			x = payment_search(ptr_struct, search_payment, size);
			if (x != 999) tabulation(ptr_struct, x, x);
			else printf("Пользователь не найден\n");
			break;

		case 3:
			printf("Введите фамилию потребителя : ");
			scanf("%s", &search_surname);

			y = surname_search(ptr_struct, search_surname, size);
			if (y != 999) tabulation(ptr_struct, y, y);
			else printf("Пользователь не найден\n");
			break;

		case 4:
			puts("В разработке");
			break;

		case 5:
			break;
		}
	}
}
